-- PAINEL ELCDX 3.5 - Prison Life - Parte 1
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

for _, g in pairs({"PAINEL_ELCDX","ELCDXPrisonLife"}) do
    local old = PlayerGui:FindFirstChild(g)
    if old then old:Destroy() end
end

local farmando, noclipAtivo, espAtivo, guiMinimizado = false, false, false, false
local posicaoOriginal, dinheiroFarmado, paginaAtual = nil, 0, 1
local modoGodAtivo = false
local espectando = false
local jogadorEspectado, cameraOriginal = nil, nil
local flyAtivo = false
local flySpeed = 50
local bodyVelocity, bodyGyro = nil, nil

local teleportes = {
    {"Spawn Prisioneiro", Vector3.new(918.53,99.99,2365.5)},
    {"Spawn Guarda", Vector3.new(-919.5,99.99,2358.5)},
    {"Armory", Vector3.new(-973.7,120.49,2040.5)},
    {"Cafeteria", Vector3.new(-336,100,2263)},
    {"Cela 1", Vector3.new(293,100,1673)},
    {"Cela 2", Vector3.new(-293,100,1673)},
    {"P√°tio", Vector3.new(-399,100,1991)},
    {"Port√£o Principal", Vector3.new(-950,100,2190)},
    {"Sala Admin", Vector3.new(-785,200,1620)},
    {"√Årea Reden√ß√£o", Vector3.new(490,100,2350)},
}

local function notificar(msg)
    local notifGui = Instance.new("ScreenGui", PlayerGui)
    local frame = Instance.new("Frame", notifGui)
    frame.Size = UDim2.new(0,250,0,35)
    frame.Position = UDim2.new(0.5,-125,0,10)
    frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
    frame.BorderSizePixel = 2
    frame.BorderColor3 = Color3.fromRGB(0,255,0)

    local label = Instance.new("TextLabel", frame)
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.Text = msg
    label.TextColor3 = Color3.fromRGB(0,255,0)
    label.Font = Enum.Font.Code
    label.TextSize = 13

    task.wait(3)
    notifGui:Destroy()
end

local function tpSimples(pos)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos)
        LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
    end
    notificar("Teleporte realizado!")
end

-- PAINEL ELCDX 3.5 - Prison Life - Parte 2
local function iniciarEspectacao(jogador)
    if espectando then notificar("J√° est√° espectando algu√©m!") return end
    if not jogador or not jogador.Character then notificar("Jogador n√£o encontrado!") return end
    local camera = workspace.CurrentCamera
    cameraOriginal = camera.CameraSubject
    camera.CameraSubject = jogador.Character:FindFirstChild("Humanoid")
    espectando = true
    jogadorEspectado = jogador
    notificar("Espectando: " .. jogador.Name)
end

local function pararEspectacao()
    if not espectando then notificar("Voc√™ n√£o est√° espectando!") return end
    local camera = workspace.CurrentCamera
    if cameraOriginal then camera.CameraSubject = cameraOriginal
    elseif LocalPlayer.Character then camera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid") end
    espectando = false
    notificar("Parou de espectar " .. (jogadorEspectado and jogadorEspectado.Name or "jogador"))
    jogadorEspectado = nil
    cameraOriginal = nil
end

local function toggleFly()
    flyAtivo = not flyAtivo
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        if flyAtivo then
            bodyVelocity = Instance.new("BodyVelocity", hrp)
            bodyVelocity.MaxForce = Vector3.new(1e5,1e5,1e5)
            bodyVelocity.Velocity = Vector3.new(0,0,0)
            bodyGyro = Instance.new("BodyGyro", hrp)
            bodyGyro.MaxTorque = Vector3.new(1e5,1e5,1e5)
            bodyGyro.CFrame = hrp.CFrame
            notificar("Fly ativado!")
        else
            if bodyVelocity then bodyVelocity:Destroy() bodyVelocity = nil end
            if bodyGyro then bodyGyro:Destroy() bodyGyro = nil end
            notificar("Fly desativado!")
        end
    end
end

-- PAINEL ELCDX 3.5 - Prison Life - Parte 3 (GUI)
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "PAINEL_ELCDX"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 280)
frame.Position = UDim2.new(0.5, -110, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
frame.BorderColor3 = Color3.fromRGB(0, 255, 0)
frame.BorderSizePixel = 2
frame.Active = true
frame.Draggable = true

local header = Instance.new("Frame", frame)
header.Size = UDim2.new(1, 0, 0, 40)
header.BackgroundColor3 = Color3.fromRGB(0, 0, 0)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, -30, 1, 0)
title.BackgroundTransparency = 1
title.Text = "PAINEL ELCDX v3.5 - Prison Life"
title.Font = Enum.Font.Code
title.TextColor3 = Color3.fromRGB(0, 255, 0)
title.TextSize = 14

local btnMin = Instance.new("TextButton", header)
btnMin.Size = UDim2.new(0, 25, 0, 25)
btnMin.Position = UDim2.new(1, -30, 0.5, -12)
btnMin.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btnMin.Text = "-"
btnMin.TextColor3 = Color3.fromRGB(255, 255, 255)
btnMin.Font = Enum.Font.Code
btnMin.TextSize = 18

local nav = Instance.new("Frame", frame)
nav.Size = UDim2.new(1, 0, 0, 30)
nav.Position = UDim2.new(0, 0, 0, 40)
nav.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local btns = {}
local maxPages = 4
for i=1, maxPages do
    local b = Instance.new("TextButton", nav)
    b.Size = UDim2.new(0, 50, 0, 25)
    b.Position = UDim2.new(0, 5+(55*(i-1)), 0, 2)
    b.Text = tostring(i)
    b.Font = Enum.Font.Code
    b.BackgroundColor3 = (i == 1) and Color3.fromRGB(0,255,0) or Color3.fromRGB(35,35,35)
    b.TextColor3 = (i == 1) and Color3.fromRGB(0,0,0) or Color3.fromRGB(255,255,255)
    b.TextSize = 14
    btns[i] = b
end

local pages = {}
for i=1, maxPages do
    local p = Instance.new("ScrollingFrame", frame)
    p.Size = UDim2.new(1, -10, 1, -80)
    p.Position = UDim2.new(0, 5, 0, 75)
    p.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    p.Visible = (i == 1)
    p.ScrollBarThickness = 6
    local container = Instance.new("Frame", p)
    container.Size = UDim2.new(1, 0, 0, 0)
    container.BackgroundTransparency = 1
    local layout = Instance.new("UIListLayout", container)
    layout.Padding = UDim.new(0, 5)
    layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        container.Size = UDim2.new(1, 0, 0, layout.AbsoluteContentSize.Y)
        p.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
    end)
    pages[i] = {scrolling = p, container = container}
end
-- Continue nas partes seguintes...
-- PAINEL ELCDX 3.5 - Prison Life - Parte 4
for _,tp in pairs(teleportes) do
    local btn = Instance.new("TextButton", pages[1].container)
    btn.Size = UDim2.new(1, -10, 0, 28)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.Code
    btn.TextSize = 12
    btn.Text = "‚á® "..tp[1]
    btn.TextXAlignment = Enum.TextXAlignment.Left
    local pad = Instance.new("UIPadding", btn)
    pad.PaddingLeft = UDim.new(0,8)
    btn.MouseButton1Click:Connect(function() tpSimples(tp[2]) end)
end

local statusLabel = Instance.new("TextLabel", pages[2].container)
statusLabel.Size = UDim2.new(1, -10, 0, 25)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "[STATUS]: OFFLINE"
statusLabel.Font = Enum.Font.Code
statusLabel.TextColor3 = Color3.fromRGB(150,150,150)
statusLabel.TextSize = 13
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
local padStatus = Instance.new("UIPadding", statusLabel)
padStatus.PaddingLeft = UDim.new(0,8)

local btnFarm = Instance.new("TextButton", pages[2].container)
btnFarm.Size = UDim2.new(1, -10, 0, 35)
btnFarm.BackgroundColor3 = Color3.fromRGB(0,150,0)
btnFarm.Text = "‚ñ∂ Iniciar Farm Guarda"
btnFarm.TextColor3 = Color3.fromRGB(255,255,255)
btnFarm.Font = Enum.Font.Code
btnFarm.TextSize = 14
local cornerFarm = Instance.new("UICorner", btnFarm)
cornerFarm.CornerRadius = UDim.new(0,6)

local dinheiroLabel = Instance.new("TextLabel", pages[2].container)
dinheiroLabel.Size = UDim2.new(1, -10, 0, 22)
dinheiroLabel.BackgroundTransparency = 1
dinheiroLabel.Text = "Dinheiro: R$0"
dinheiroLabel.Font = Enum.Font.Code
dinheiroLabel.TextColor3 = Color3.fromRGB(200,200,200)
dinheiroLabel.TextSize = 13
dinheiroLabel.TextXAlignment = Enum.TextXAlignment.Left
local padDin = Instance.new("UIPadding", dinheiroLabel)
padDin.PaddingLeft = UDim.new(0,8)

-- PAINEL ELCDX 3.5 - Prison Life - Parte 5
local function noTimeGuarda()
    return LocalPlayer.Team and (LocalPlayer.Team.Name == "Guards" or LocalPlayer.Team.Name == "Police")
end

local function encontrarPrisioneiro()
    local meuHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not meuHRP then return nil end
    local alvo, distMin = nil, math.huge
    for _,p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Team and (p.Team.Name == "Prisoners" or p.Team.Name == "Criminals") 
        and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            local dist = (p.Character.HumanoidRootPart.Position - meuHRP.Position).Magnitude
            if dist < distMin and dist < 40 then
                alvo = p
                distMin = dist
            end
        end
    end
    return alvo
end

btnFarm.MouseButton1Click:Connect(function()
    if farmando then
        farmando = false
        statusLabel.Text = "[STATUS]: OFFLINE"
        statusLabel.TextColor3 = Color3.fromRGB(150,150,150)
        btnFarm.Text = "‚ñ∂ Iniciar Farm Guarda"
        btnFarm.BackgroundColor3 = Color3.fromRGB(0,150,0)
        notificar("Farm de guarda parado!")
        return
    end
    
    if not noTimeGuarda() then
        notificar("Entre no time Guarda/Police primeiro!")
        return
    end
    
    farmando = true
    statusLabel.Text = "[STATUS]: FARMANDO"
    statusLabel.TextColor3 = Color3.fromRGB(0,255,0)
    btnFarm.Text = "‚èπÔ∏è Parar Farm"
    btnFarm.BackgroundColor3 = Color3.fromRGB(200,0,0)
    dinheiroFarmado = 0
    dinheiroLabel.Text = "Dinheiro: R$0"
    
    task.spawn(function()
        while farmando do
            local prisioneiro = encontrarPrisioneiro()
            if prisioneiro and prisioneiro.Character and prisioneiro.Character:FindFirstChild("Head") then
                tpSimples(prisioneiro.Character.HumanoidRootPart.Position + Vector3.new(0,5,0))
                task.wait(0.3)
                pcall(function()
                    workspace.Remote.arrest:InvokeServer(prisioneiro.Character.Head)
                end)
                dinheiroFarmado = dinheiroFarmado + 500
                dinheiroLabel.Text = "Dinheiro: R$"..dinheiroFarmado
            end
            task.wait(0.8)
        end
    end)
end)

-- PAINEL ELCDX 3.5 - Prison Life - Parte 6
local btnFly = Instance.new("TextButton", pages[2].container)
btnFly.Size = UDim2.new(1, -10, 0, 30)
btnFly.BackgroundColor3 = Color3.fromRGB(0,100,200)
btnFly.Text = "‚úà Fly: OFF"
btnFly.TextColor3 = Color3.fromRGB(255,255,255)
btnFly.Font = Enum.Font.Code
btnFly.TextSize = 13
btnFly.MouseButton1Click:Connect(function()
    toggleFly()
    btnFly.Text = flyAtivo and "‚úà Fly: ON" or "‚úà Fly: OFF"
    btnFly.BackgroundColor3 = flyAtivo and Color3.fromRGB(0,200,0) or Color3.fromRGB(0,100,200)
end)

local btnNoclip = Instance.new("TextButton", pages[3].container)
btnNoclip.Size = UDim2.new(1, -10, 0, 30)
btnNoclip.BackgroundColor3 = Color3.fromRGB(150,50,150)
btnNoclip.Text = "üëª Noclip: OFF"
btnNoclip.TextColor3 = Color3.fromRGB(255,255,255)
btnNoclip.Font = Enum.Font.Code
btnNoclip.TextSize = 13

local noclipLoop
btnNoclip.MouseButton1Click:Connect(function()
    noclipAtivo = not noclipAtivo
    btnNoclip.Text = noclipAtivo and "üëª Noclip: ON" or "üëª Noclip: OFF"
    btnNoclip.BackgroundColor3 = noclipAtivo and Color3.fromRGB(200,0,200) or Color3.fromRGB(150,50,150)
    
    if noclipAtivo then
        noclipLoop = RunService.Heartbeat:Connect(function()
            if LocalPlayer.Character then
                for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
        notificar("Noclip ativado!")
    else
        if noclipLoop then noclipLoop:Disconnect() end
        notificar("Noclip desativado!")
    end
end)

-- PAINEL ELCDX 3.5 - Prison Life - Parte 7 (Sistema de P√°ginas)
for i,btn in pairs(btns) do
    btn.MouseButton1Click:Connect(function()
        for j=1,maxPages do
            pages[j].scrolling.Visible = false
            btns[j].BackgroundColor3 = Color3.fromRGB(35,35,35)
            btns[j].TextColor3 = Color3.fromRGB(255,255,255)
        end
        pages[i].scrolling.Visible = true
        btn.BackgroundColor3 = Color3.fromRGB(0,255,0)
        btn.TextColor3 = Color3.fromRGB(0,0,0)
    end)
end

local btnEsp = Instance.new("TextButton", pages[3].container)
btnEsp.Size = UDim2.new(1, -10, 0, 30)
btnEsp.BackgroundColor3 = Color3.fromRGB(255,100,0)
btnEsp.Text = "üëÅ ESP: OFF"
btnEsp.TextColor3 = Color3.fromRGB(255,255,255)
btnEsp.Font = Enum.Font.Code
btnEsp.TextSize = 13
btnEsp.MouseButton1Click:Connect(function()
    espAtivo = not espAtivo
    btnEsp.Text = espAtivo and "üëÅ ESP: ON" or "üëÅ ESP: OFF"
    btnEsp.BackgroundColor3 = espAtivo and Color3.fromRGB(255,200,0) or Color3.fromRGB(255,100,0)
    notificar(espAtivo and "ESP ativado!" or "ESP desativado!")
end)

btnMin.MouseButton1Click:Connect(function()
    guiMinimizado = not guiMinimizado
    frame.Size = guiMinimizado and UDim2.new(0,220,0,40) or UDim2.new(0,220,0,280)
    for i=1,maxPages do pages[i].scrolling.Visible = false end
    title.Text = guiMinimizado and "PAINEL ELCDX v3.5" or "PAINEL ELCDX v3.5 - Prison Life"
end)

-- Fly Speed Control
local speedLabel = Instance.new("TextLabel", pages[2].container)
speedLabel.Size = UDim2.new(1, -10, 0, 20)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Velocidade Fly: "..flySpeed
speedLabel.Font = Enum.Font.Code
speedLabel.TextColor3 = Color3.fromRGB(180,180,180)
speedLabel.TextSize = 12

-- PAINEL ELCDX 3.5 - Prison Life - Parte 8 (Fly Speed + ESP Loop)
local function atualizarFly()
    if flyAtivo and bodyVelocity and LocalPlayer.Character then
        local camera = workspace.CurrentCamera
        local dir = Vector3.new(0,0,0)
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + camera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - camera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - camera.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + camera.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0,1,0) end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then dir = dir - Vector3.new(0,1,0) end
        
        bodyVelocity.Velocity = (dir.Unit * flySpeed) + Vector3.new(0,0.1,0)
        bodyGyro.CFrame = camera.CFrame
    end
end

RunService.Heartbeat:Connect(atualizarFly)

if espAtivo then
    RunService.Heartbeat:Connect(function()
        for _,v in pairs(Players:GetPlayers()) do
            if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild("Head") then
                local esp = v.Character.Head:FindFirstChild("ESP_ELCDX")
                if not esp then
                    esp = Instance.new("BillboardGui", v.Character.Head)
                    esp.Name = "ESP_ELCDX"
                    esp.Size = UDim2.new(0,100,0,50)
                    esp.StudsOffset = Vector3.new(0,3,0)
                    local nome = Instance.new("TextLabel", esp)
                    nome.Size = UDim2.new(1,0,0.5,0)
                    nome.BackgroundTransparency = 1
                    nome.Text = v.Name
                    nome.TextColor3 = Color3.fromRGB(0,255,0)
                    nome.Font = Enum.Font.Code
                    nome.TextSize = 14
                end
            end
        end
    end)
end

-- Controles Fly Speed
local function alterarSpeed(delta)
    flySpeed = math.clamp(flySpeed + delta, 16, 200)
    speedLabel.Text = "Velocidade Fly: "..flySpeed
end

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.KeyR then alterarSpeed(10)
    elseif input.KeyCode == Enum.KeyCode.KeyE then alterarSpeed(-10) end
end)

notificar("PAINEL ELCDX v3.5 - Prison Life carregado!")
